<% news = paginatedNews.docs; %>
<% news.forEach((article)=>{ %>
    <div class="post-content">
        <div class="row">
            <div class="col-md-4">
                <a class="post-img" href="/single/<%= article.id %>"><img src="/uploads/<%= article.image %>" alt=""/></a>
            </div>
            <div class="col-md-8">
                <div class="inner-content clearfix">
                    <h3><a href='/single/<%= article.id %>'>
                        <%= article.title %></a>
                    </h3>
                    <div class="post-information">
                    <span>
                        <i class="fa fa-tags" aria-hidden="true"></i>
                        <a href='/category/<%= article.category.slug %>'><%= article.category.name %></a>
                    </span>
                    <span>
                        <i class="fa fa-user" aria-hidden="true"></i>
                        <a href='/author/<%= article.author.id %>'><%= article.author.fullname %></a>
                    </span>
                    <span>
                        <i class="fa fa-calendar" aria-hidden="true"></i>
                        <%= new Date(article.createdAt).toDateString() %>
                    </span>
                    </div>
                    <p class="description">
                        <%= article.content.substring(0, 50) + "..." %>
                    </p>
                    <a class='read-more pull-right' href='/single/<%= article.id %>'>read more</a>
                </div>
            </div>
        </div>
    </div>
<% }) %>

    <%
        function buildQueryString(query, page){
            const param = new URLSearchParams(query);
            param.set('page', page);
            return '?' + param.toString();
        }
    %>

    <nav>
        <ul class="pagination">
            <% if(paginatedNews.hasPrevPage){ %>
            <li class="page-item">
                <a class="page-link" href="<%= buildQueryString(urlQuery, paginatedNews.prevPage)%>">Previous</a>
            </li>
            <% }else{ %>
            <li class="page-item disabled">
                <a class="page-link">Previous</a>
            </li>
            <% } %>

            <% for(let i=1; i<= paginatedNews.totalPages; i++){ %>
            <li class="page-item <%= i == paginatedNews.page ? 'active' : '' %>">
                <a class="page-link" href="<%= buildQueryString(urlQuery, i) %>"><%= i %></a>
            </li>
            <% } %>

            <% if(paginatedNews.hasNextPage){ %>
            <li class="page-item">
                <a class="page-link" href="<%= buildQueryString(urlQuery, paginatedNews.nextPage)%>">Next</a>
            </li>
            <% }else{ %>
            <li class="page-item disabled">
                <a class="page-link">Next</a>
            </li>
            <% } %>
        </ul>
    </nav>